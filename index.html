<!DOCTYPE html>
<html>
	<head>
		<title>Javascript</title>
		<script src="plotly.min.js"></script>
	</head>

	<body>
		<div id="chart"></div>
		<div id="chart2"></div>
		<script>
			//Number generation
			function getData() {
				return 160 + Math.random()*5;
			}

			function returnOne() {
				return 1250 + Math.random()*10;
			}

			function returnTwo(){
				return 1450 + Math.random()*10;
			}
			
			//Traces
			var trace1 = {
				y:[1250],
				name: 'F3', 
				typ:'line'
			};

			var trace2 = {
				y:[1450],
				name: 'O3', 
				typ:'line'
			};

			//Create two axis data array to plot
			var data = [trace1, trace2];

			var trace3 = {
				y:[50],
				name: 'Ek_norden', 
				typ:'line'
			};

			var data2 = [trace3]

			var layout1 = {
				title: 'Inertia',
			  	xaxis: {
			    title: 'Time',
			    titlefont: {
			      family: 'Courier New, monospace',
			      size: 18,
			      color: '#7f7f7f'
			    }
			  },
			  yaxis: {
			    title: 'GWs',
			    titlefont: {
			      family: 'Courier New, monospace',
			      size: 18,
			      color: '#7f7f7f'
			    }
			  }
			};

			var layout2 = {
				title: 'Active output power',
			  	xaxis: {
			    title: 'Time',
			    titlefont: {
			      family: 'Courier New, monospace',
			      size: 18,
			      color: '#7f7f7f'
			    }
			  },
			  yaxis: {
			    title: 'MW',
			    titlefont: {
			      family: 'Courier New, monospace',
			      size: 18,
			      color: '#7f7f7f'
			    }
			  }
			};


			//Plotly.plot('chart',[{
			//	y:[getData()],
			//	typ:'line'
			//}]);

			Plotly.plot('chart', data2, layout1); 
			Plotly.plot('chart2', data, layout2); 

			var cnt = 0; 

			setInterval(function(){
				//Update y plot with nex point
				Plotly.extendTraces('chart',{y: [[getData()]]}, [0]);
				Plotly.extendTraces('chart2', {y: [[returnOne()], [returnTwo()]]}, [0, 1]);
				cnt++; //Increment counter

				//Start sliding with the plot at x = 500
				if(cnt > 500){
					Plotly.relayout('chart',{
						xaxis: {
							range: [cnt-500,cnt]
						}
					});
				}

				if(cnt > 500){
					Plotly.relayout('chart2',{
						xaxis: {
							range: [cnt-500,cnt]
						}
					});
				}


			},15); //Update interval in milliseconds


		</script>
	</body>
</html>
